# Upbit Pro Algo-Trader v2.7

업비트 OpenAPI 기반 24시간 코인 자동매매 프로그램

![Python](https://img.shields.io/badge/Python-3.10+-blue.svg)
![PyQt6](https://img.shields.io/badge/PyQt6-6.0+-green.svg)
![License](https://img.shields.io/badge/License-MIT-yellow.svg)

---

## ✨ 주요 기능

### 🔥 트레이딩 전략
- **변동성 돌파 전략**: 래리 윌리엄스 전략 기반, 전일 변동폭 × K값으로 목표가 계산
- **MA5 추세 필터**: 5봉 이동평균선 위에서만 매수 진입
- **RSI 과매수 필터**: RSI 상한선 초과 시 진입 방지
- **MACD 골든크로스 필터**: MACD > Signal 일 때만 매수 (상승 모멘텀 확인)
- **거래량 필터**: 평균 거래량 대비 충분한 거래량 확인
- **트레일링 스톱**: 고점 대비 하락 시 자동 이익 실현
- **손절 기능**: 설정 손실률 초과 시 자동 손절 매도

### � 일괄 매도/매수 기능 (v2.6 신규)
- **일괄 매도**: 보유 중인 모든 코인을 현재가로 즉시 매도
- **일괄 매수**: 입력된 코인들을 균등 분배하여 현재가 매수
- **2중 확인 다이얼로그**: 실수 방지를 위한 안전 장치
- **자동매매 연계**: 일괄 작업 완료 후 알고리즘 매매 자동 시작 옵션

### �📊 고급 기술적 분석
- **MACD**: 12, 26, 9 기본값으로 모멘텀 분석
- **RSI**: 14일 기준 과매수/과매도 판단
- **스토캐스틱 RSI**: 정밀한 과매수/과매도 판단
- **DMI/ADX**: 추세 강도 및 방향 분석
- **볼린저 밴드**: 20일, 2σ 변동성 분석
- **ATR**: 동적 손절/익절 설정용

### 🧮 진입 스코어링 시스템
- 가중치 기반 0~100점 진입 점수 계산
- 목표가 돌파, MA 필터, RSI, MACD, 거래량, 볼린저밴드 종합 평가
- 설정된 임계점 이상일 때만 진입

### 🎛️ 프리셋 관리 시스템
- **기본 프리셋**: 공격적 / 표준 / 보수적 선택
- **사용자 프리셋**: 현재 설정을 저장하고 언제든 불러오기
- **프리셋 관리**: 생성 / 편집 / 삭제 다이얼로그

### 📝 거래 히스토리
- **거래 내역 탭**: 모든 매수/매도 기록 자동 저장
- **CSV 내보내기**: 거래 기록 파일 다운로드
- **기록 관리**: 오늘 기록 삭제, 전체 조회

### 🖥️ 시스템 트레이 통합
- **트레이 최소화**: 닫기 버튼 클릭 시 트레이로 이동
- **트레이 메뉴**: 표시/숨기기, 매매 시작/중지, 종료
- **트레이 알림**: 거래 체결 시 데스크톱 알림

### 💡 UI/UX
- **맑은고딕 폰트**: 깔끔한 한글 표시
- **스크롤 UI**: 전체 화면 스크롤 지원
- **반응형 레이아웃**: 창 최대화 시 깨짐 없음
- **다크 테마**: 눈에 편한 다크 모드
- **로그 메모리 관리**: 500줄 자동 정리

---

## 📋 요구사항

```
Python >= 3.10
PyQt6 >= 6.0
pyupbit >= 0.2.30
pandas
```

---

## 🚀 설치 및 실행

### 1. 의존성 설치
```bash
pip install PyQt6 pyupbit pandas
```

### 2. 프로그램 실행
```bash
python upbit_trader.py
```

### 3. 업비트 API 키 설정
1. [업비트 Open API 관리](https://upbit.com/mypage/open_api_management)에서 API 키 발급
2. **주문** 권한 포함 필수
3. Access Key, Secret Key 입력
4. "🔌 시스템 접속" 버튼 클릭

---

## ⚙️ 설정 가이드

| 항목 | 기본값 | 권장 범위 | 설명 |
|------|--------|-----------|------|
| 캔들 간격 | 4시간 | 1시간~일봉 | 변동성 계산 기준 |
| K값 | 0.4 | 0.3~0.5 | 변동성 돌파 계수 |
| 투자비중 | 10% | 5%~20% | 종목당 투자 비율 |
| TS 발동 | 5% | 3%~10% | 트레일링 시작 수익률 |
| 손절률 | 3% | 2%~5% | 강제 손절 기준 |

### 전략 프리셋
| 프리셋 | K값 | TS발동 | 손절 | 투자비중 |
|--------|-----|--------|-----|---------|
| 🔥 공격적 | 0.5 | 3% | 5% | 15% |
| ⚖️ 표준 | 0.4 | 5% | 3% | 10% |
| 🛡️ 보수적 | 0.3 | 7% | 2% | 5% |

---

## 🔧 EXE 빌드 (PyInstaller)

```bash
pip install pyinstaller
pyinstaller upbit_trader.spec
```

빌드 결과: `dist/UpbitTrader/UpbitTrader.exe`

---

## ⚠️ 주의사항

> **경고**: 이 프로그램은 실제 자금을 거래합니다. 반드시 소액으로 테스트하세요.

- API 키 발급 시 **"주문"** 권한 필요
- 투자 손실에 대한 책임은 사용자에게 있습니다
- 처음 사용자는 **"보수적"** 프리셋으로 시작하세요

---

## 📝 변경 이력

### v2.7 (2026-01-15)
- ✨ 확장 모듈 통합 (분석 리포트, 백테스트, 고급 지표)
- ✨ 분할 익절 기능 (3%/5%/8% 단계별 자동 매도)
- ✨ 진입 점수 시스템 적용 (60점 이상시 진입)
- ✨ 도구 메뉴 추가 (거래 분석, 백테스트, CSV 내보내기)
- 🛠️ 체결 확인 타임아웃 (60초) 추가
- 🛠️ API 키 자동 저장/로드
- 🛠️ 종료 시 설정 자동 저장
- 🛠️ 일일 통계 자정 자동 초기화

### v2.6 (2025-12-23)
- ✨ 일괄 매도/매수 기능 추가
- ✨ 2중 확인 다이얼로그 (안전 장치)
- ✨ 완료 후 자동매매 시작 옵션

### v2.5 (2025-12-23)
- ✨ 거래 히스토리 탭 및 거래 기록 관리
- ✨ 스토캐스틱 RSI, DMI/ADX 지표 추가
- ✨ 진입 스코어링 시스템 (가중치 기반)
- ✨ API 호출 재시도 로직
- 🛠️ 로그 메모리 관리 개선 (500줄 제한)
- 🛠️ 안정성 및 에러 처리 강화

### v2.0 (2025-12-19)
- ✨ MACD/거래량/볼린저밴드/ATR 지표
- ✨ 프리셋 관리, 시스템 트레이, 인앱 도움말
- 🎨 스크롤 UI, 반응형 레이아웃
- 🎨 맑은고딕 폰트, 다크 테마 개선

### v1.0
- 초기 버전 (변동성 돌파 + MA5/RSI)
