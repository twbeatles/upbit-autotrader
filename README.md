# Upbit Pro Algo-Trader v2.0

업비트 OpenAPI 기반 24시간 코인 자동매매 프로그램

![Python](https://img.shields.io/badge/Python-3.10+-blue.svg)
![PyQt6](https://img.shields.io/badge/PyQt6-6.0+-green.svg)
![License](https://img.shields.io/badge/License-MIT-yellow.svg)

---

## ✨ 주요 기능

### 🔥 트레이딩 전략
- **변동성 돌파 전략**: 래리 윌리엄스 전략 기반, 전일 변동폭 × K값으로 목표가 계산
- **MA5 추세 필터**: 5봉 이동평균선 위에서만 매수 진입
- **RSI 과매수 필터**: RSI 상한선 초과 시 진입 방지
- **MACD 골든크로스 필터**: MACD > Signal 일 때만 매수 (상승 모멘텀 확인)
- **거래량 필터**: 평균 거래량 대비 충분한 거래량 확인
- **트레일링 스톱**: 고점 대비 하락 시 자동 이익 실현
- **손절 기능**: 설정 손실률 초과 시 자동 손절 매도

### 📊 고급 기술적 분석
- **MACD**: 12, 26, 9 기본값으로 모멘텀 분석
- **RSI**: 14일 기준 과매수/과매도 판단
- **볼린저 밴드**: 20일, 2σ 변동성 분석 (구현됨)
- **ATR**: 동적 손절/익절 설정용 (구현됨)

### 🎛️ 프리셋 관리 시스템
- **기본 프리셋**: 공격적 / 표준 / 보수적 선택
- **사용자 프리셋**: 현재 설정을 저장하고 언제든 불러오기
- **프리셋 관리**: 생성 / 편집 / 삭제 다이얼로그

### 🖥️ 시스템 트레이 통합
- **트레이 최소화**: 닫기 버튼 클릭 시 트레이로 이동
- **트레이 메뉴**: 표시/숨기기, 매매 시작/중지, 종료
- **트레이 알림**: 거래 체결 시 데스크톱 알림

### 🚀 Windows 자동 시작
- 시작 프로그램 등록/해제 (레지스트리)
- 시작 시 트레이 최소화 옵션
- 시작 시 자동 API 연결 옵션

### 📚 인앱 도움말
- **빠른 시작 가이드**: 단계별 설정 안내
- **전략 설명**: 각 전략의 상세 원리 설명
- **FAQ**: 자주 묻는 질문과 답변

### 💡 UI/UX 개선
- **맑은고딕 폰트**: 깔끔한 한글 표시
- **상세 툴팁**: 모든 설정에 권장 범위 설명
- **다크 테마**: 눈에 편한 다크 모드 UI
- **메뉴바**: 파일/보기/도움말 메뉴

---

## 📋 요구사항

```
Python >= 3.10
PyQt6 >= 6.0
pyupbit >= 0.2.30
pandas >= 1.5.0
```

---

## 🚀 설치 및 실행

### 1. 의존성 설치
```bash
pip install PyQt6 pyupbit pandas
```

### 2. 프로그램 실행
```bash
python upbit_trader.py
```

### 3. 업비트 API 키 설정
1. [업비트 Open API 관리](https://upbit.com/mypage/open_api_management)에서 API 키 발급
2. **주문** 권한 포함 필수
3. Access Key, Secret Key 입력
4. "🔌 시스템 접속" 버튼 클릭

---

## ⚙️ 설정 가이드

### 기본 설정값
| 항목 | 기본값 | 권장 범위 | 설명 |
|------|--------|-----------|------|
| 캔들 간격 | 4시간 | 1시간~일봉 | 변동성 계산 기준 |
| K값 | 0.4 | 0.3~0.5 | 변동성 돌파 계수 |
| 투자비중 | 10% | 5%~20% | 종목당 투자 비율 |
| TS 발동 | 5% | 3%~10% | 트레일링 시작 수익률 |
| TS 하락폭 | 2% | 1%~3% | 고점 대비 매도 트리거 |
| 손절률 | 3% | 2%~5% | 강제 손절 기준 |

### 고급 필터 설정
| 필터 | 기본값 | 설명 |
|------|--------|------|
| RSI | 14일, 상한 70 | 과매수 구간 필터 |
| MACD | 12, 26, 9 | 골든크로스 필터 |
| 거래량 | 20일, 1.5배 | 평균 대비 거래량 |

### 전략 프리셋
| 프리셋 | K값 | TS발동 | TS하락 | 손절 | 투자비중 | 설명 |
|--------|-----|--------|--------|-----|---------|------|
| 🔥 공격적 | 0.5 | 3% | 1.5% | 5% | 15% | 높은 수익, 높은 리스크 |
| ⚖️ 표준 | 0.4 | 5% | 2.0% | 3% | 10% | 균형 잡힌 접근 |
| 🛡️ 보수적 | 0.3 | 7% | 2.5% | 2% | 5% | 안정적, 낮은 리스크 |

---

## 📁 파일 구조

```
업비트 자동매매/
├── upbit_trader.py      # 메인 프로그램 (약 2,300줄)
├── upbit_trader.spec    # PyInstaller 빌드 설정
├── upbit_settings.json  # 설정 파일 (자동 생성)
├── upbit_presets.json   # 사용자 프리셋 (자동 생성)
├── README.md            # 문서
└── logs/                # 로그 디렉토리
    └── upbit_YYYYMMDD.log
```

---

## 🔧 EXE 빌드 (PyInstaller)

### 빌드 명령
```bash
pip install pyinstaller
pyinstaller upbit_trader.spec
```

### 빌드 결과
- 실행파일: `dist/UpbitTrader/UpbitTrader.exe`
- 단일 폴더 배포 (onedir 모드)

---

## ⚠️ 주의사항

> **경고**: 이 프로그램은 실제 자금을 거래합니다. 반드시 소액으로 충분히 테스트하세요.

- API 키 발급 시 **"주문"** 권한 필요
- 24시간 운영 시 안정적인 인터넷 연결 필수
- 투자 손실에 대한 책임은 사용자에게 있습니다
- 처음 사용자는 **"보수적"** 프리셋으로 시작하세요

---

## 📜 라이선스

MIT License

---

## 📝 변경 이력

### v2.0 (2025-12-19)
**알고리즘 최적화**
- ✨ MACD 골든크로스 필터 (12, 26, 9)
- ✨ 거래량 필터 연동 (평균 대비 배수)
- ✨ 볼린저 밴드 계산 (20일, 2σ)
- ✨ ATR 계산 (동적 손절용)

**기능 개선**
- ✨ 사용자 정의 프리셋 관리
- ✨ 시스템 트레이 통합
- ✨ Windows 자동 시작 지원
- ✨ 인앱 도움말 및 가이드

**UI/UX**
- 🎨 맑은고딕 폰트 최적화
- 🎨 체크박스/다이얼로그 UI 개선
- 🎨 메뉴바/툴팁 스타일 전면 개선
- 🎨 MACD/거래량 필터 체크박스 추가

### v1.0
- 초기 버전
- 변동성 돌파 전략
- MA5/RSI 필터
- 트레일링 스톱/손절
